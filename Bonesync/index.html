<!DOCTYPE html>
<html>
  <head>
    <title>Bone-o-matic</title>
    <style>
      body {background:black; margin: 0; padding-bottom: 3rem; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
      button {border:lightgray 5px solid; background:#161616; border-radius:5%; color:white; text-shadow: white; position:absolute; width:80vw; height:80vh; top:10vh; left:10vw; font-size:10vw;}
      input {color:white;}
    </style>
  </head>
  <form id="form" action="">
      <input type=checkbox><span style="color:white;">Check this box so the page can play audio</span>
      <button>Bonesync</button>
    </form>
    <script src="/socket.io/socket.io.js"></script>

    <script>
      var socket = io();
      var form = document.getElementById('form');
      form.addEventListener('submit', function(e) {
        e.preventDefault();
          socket.emit('bonedog', 69);
        }
      );

      socket.on('bonedog', function() {
      const d = new Date();
      let seconds = d.getSeconds();
      let ms = d.getMilliseconds();
      let correctedSum = (seconds * 1000) + ms;
      document.getElementsByTagName("button")[0].style.color = "lime";
      document.getElementsByTagName("button")[0].innerHTML = "✔️Bonesynced";
      document.getElementsByTagName("span")[0].innerHTML = "First riff in " + (60 - seconds) + " seconds!";
      setTimeout(function() {var audio = new Audio("https://github.com/IanR1225/IanR1225.github.io/blob/main/bone%20dog.mp3?raw=true");
      audio.play();}, 60000 - correctedSum);
      setTimeout(function() {alert("Bonedog has concluded");}, 3634000);
      });
    </script>
  </body>
</html>
